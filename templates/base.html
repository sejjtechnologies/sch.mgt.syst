<!-- Fixed Banner Card -->
<div id="top-banner" class="position-fixed top-0 start-0 w-100 border-0 rounded-0 shadow-lg"
     style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #3a7bd5 100%) !important; height: 100px; z-index: 1050; position: relative; overflow: hidden;">

  <!-- Subtle pattern overlay -->
  <div class="position-absolute top-0 start-0 w-100 h-100 opacity-10"
       style="background-image: radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 2px, transparent 2px), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 2px, transparent 2px); background-size: 40px 40px;"></div>

  <!-- Gradient overlay for depth -->
  <div class="position-absolute top-0 start-0 w-100 h-100"
       style="background: linear-gradient(45deg, rgba(255,255,255,0.05) 0%, transparent 50%, rgba(0,0,0,0.05) 100%);"></div>

  <div class="container-fluid h-100 position-relative" style="z-index: 2;">
    <div class="row h-100 align-items-center">
      <div class="col-md-2 text-center">
        <!-- School Logo -->
        <img src="{{ url_for('static', filename='images/school_192.png') }}"
             alt="School Logo"
             class="rounded-circle shadow"
             style="width: 60px; height: 60px; object-fit: cover; border: 3px solid rgba(255,255,255,0.9); transition: all 0.3s ease;">
      </div>

      <div class="col-md-7">
        <div class="d-flex flex-column">
          <!-- System Name -->
          <h5 class="mb-1 text-white fw-bold" style="font-size: 1.2rem; text-shadow: 0 2px 4px rgba(0,0,0,0.5);">
            Elite Primary School Management System
          </h5>

          <!-- Version -->
          <p class="mb-1 text-light small" style="font-size: 0.8rem; text-shadow: 0 1px 2px rgba(0,0,0,0.3);">
            Version: {{ app_version }}
          </p>

          <!-- Contact Info -->
          <p class="mb-0 text-light small" style="font-size: 0.75rem; text-shadow: 0 1px 2px rgba(0,0,0,0.3);">
            Contact Us: 0744137174 / 0768936641,
            <a href="mailto:sejjtechnologies@gmail.com" class="text-warning text-decoration-none fw-semibold"
               style="text-shadow: 0 1px 2px rgba(0,0,0,0.5);">
              sejjtechnologies@gmail.com
            </a>
          </p>

          <!-- Copyright -->
          <p class="mb-0 text-light small fst-italic" style="font-size: 0.7rem; opacity: 0.9; text-shadow: 0 1px 2px rgba(0,0,0,0.3);">
            Â© Developed & Maintained By <a href="{{ url_for('user.developer') }}" class="text-warning text-decoration-none fw-semibold developer-link" style="transition: all 0.3s ease;">Sejjtechnologies(U) Ltd</a>
          </p>
        </div>
      </div>

      <div class="col-md-3 text-center">
        <button id="dismiss-banner" class="btn btn-success px-3 py-1 fw-bold">
          <i class="fas fa-check me-1"></i>
          <span>OKAY</span>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid mt-4" style="padding-top: 100px;">

<style>
/* Fixed Banner Styling */
#top-banner {
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  transition: all 0.3s ease;
  animation: slideDown 0.6s ease-out;
  backdrop-filter: blur(10px);
}

@keyframes slideDown {
  0% {
    transform: translateY(-100%) scale(0.95);
    opacity: 0;
  }
  50% {
    transform: translateY(-5px) scale(1.01);
    opacity: 0.9;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

#top-banner.hidden {
  transform: translateY(-100%);
  opacity: 0;
}

/* Enhanced button styling */
.btn-outline-light {
  transition: all 0.3s ease;
  border-width: 1.5px;
}

.btn-outline-light:hover {
  color: #333 !important;
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

/* Developer Link Styling */
.developer-link {
  transition: all 0.3s ease;
  position: relative;
  cursor: pointer;
}

.developer-link:hover {
  color: #ffc107 !important;
  text-shadow: 0 0 8px rgba(255, 193, 7, 0.5);
  transform: translateY(-1px);
}

.developer-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 1px;
  background: #ffc107;
  transition: width 0.3s ease;
}

.developer-link:hover::after {
  width: 100%;
}

#dismiss-banner {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  border: 2px solid #28a745;
  color: #FFFFFF;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
  transition: all 0.3s ease;
  font-size: 0.8rem;
  padding: 0.4rem 0.8rem;
}

#dismiss-banner:hover {
  background: linear-gradient(135deg, #20c997 0%, #28a745 100%);
  border-color: #20c997;
  color: #FFFFFF;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(40, 167, 69, 0.5);
}

#dismiss-banner:active {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(40, 167, 69, 0.2);
}

#dismiss-banner .fas {
  font-size: 0.7rem;
}

/* Ripple animation for button clicks */
@keyframes ripple {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

/* Logo styling */
#top-banner img {
  transition: all 0.3s ease;
  border: 3px solid rgba(255,255,255,0.9) !important;
  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.3));
}

#top-banner img:hover {
  transform: scale(1.15) rotate(5deg);
  box-shadow: 0 8px 20px rgba(255,255,255,0.3) !important;
  border-color: #FFFFFF !important;
  filter: drop-shadow(0 4px 12px rgba(255,255,255,0.4));
}

/* Responsive adjustments for banner */
@media (max-width: 768px) {
  #top-banner {
    height: auto !important;
    min-height: 90px;
    padding: 0.5rem 0;
  }

  #top-banner .container-fluid {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  #top-banner .row {
    align-items: center;
    text-align: center;
  }

  #top-banner .col-md-2,
  #top-banner .col-md-7,
  #top-banner .col-md-3 {
    padding: 0.25rem;
  }

  #top-banner img {
    width: 45px !important;
    height: 45px !important;
  }

  #top-banner h5 {
    font-size: 1rem !important;
    margin-bottom: 0.25rem !important;
  }

  #top-banner .small {
    font-size: 0.65rem !important;
    line-height: 1.2;
  }

  #dismiss-banner {
    font-size: 0.75rem !important;
    padding: 0.3rem 0.6rem !important;
  }

  .container-fluid[style*="padding-top"] {
    padding-top: 110px !important;
  }
}

@media (max-width: 576px) {
  #top-banner {
    min-height: 120px;
    padding: 0.75rem 0;
  }

  #top-banner .col-md-2 {
    margin-bottom: 0.5rem;
  }

  #top-banner .col-md-7 {
    text-align: center !important;
    margin-bottom: 0.5rem;
  }

  #top-banner .col-md-3 {
    margin-top: 0.5rem;
  }

  #top-banner h5 {
    font-size: 0.9rem !important;
  }

  #top-banner .small {
    font-size: 0.6rem !important;
  }

  #dismiss-banner {
    font-size: 0.7rem !important;
    padding: 0.4rem 0.8rem !important;
  }

  .container-fluid[style*="padding-top"] {
    padding-top: 140px !important;
  }
}

@media (max-width: 480px) {
  #top-banner {
    min-height: 140px;
  }

  #top-banner img {
    width: 40px !important;
    height: 40px !important;
  }

  #top-banner h5 {
    font-size: 0.85rem !important;
  }

  #top-banner .small {
    font-size: 0.55rem !important;
  }
}
</style>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<script>
  // Auto-hide flash messages after 2 seconds
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
      const alerts = document.querySelectorAll('.alert');
      alerts.forEach(function(alert) {
        alert.style.transition = 'opacity 0.5s';
        alert.style.opacity = '0';
        setTimeout(function() {
          alert.style.display = 'none';
        }, 500);
      });
    }, 2000);

    // Banner dismiss functionality - shows on every refresh
    const banner = document.getElementById('top-banner');
    const dismissBtn = document.getElementById('dismiss-banner');

    // Dismiss banner when OKAY is clicked with enhanced animation
    if (dismissBtn) {
      dismissBtn.addEventListener('click', function() {
        // Add click ripple effect
        const ripple = document.createElement('div');
        ripple.style.position = 'absolute';
        ripple.style.borderRadius = '50%';
        ripple.style.background = 'rgba(255, 255, 255, 0.6)';
        ripple.style.transform = 'scale(0)';
        ripple.style.animation = 'ripple 0.6s linear';
        ripple.style.left = '50%';
        ripple.style.top = '50%';
        ripple.style.width = '20px';
        ripple.style.height = '20px';
        ripple.style.marginLeft = '-10px';
        ripple.style.marginTop = '-10px';
        this.appendChild(ripple);

        // Animate banner out
        setTimeout(() => {
          banner.style.transform = 'translateY(-100%) scale(0.95)';
          banner.style.opacity = '0';
        }, 100);

        // Remove banner after animation
        setTimeout(() => {
          banner.style.display = 'none';
          document.querySelector('.container-fluid').style.paddingTop = '0';
        }, 400);
      });
    }

    // Add click effect to email button
    const emailBtn = document.querySelector('.btn-outline-light[href^="mailto:"]');
    if (emailBtn) {
      emailBtn.addEventListener('click', function() {
        this.style.transform = 'scale(0.95)';
        setTimeout(() => {
          this.style.transform = 'scale(1)';
        }, 150);
      });
    }
  });
</script>
